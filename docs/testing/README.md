# 测试说明（手动回归）

本目录提供用于思源环境的手动回归清单与样例文档，适用于需要依赖思源运行时的功能测试。

## 目录结构

- `docs/testing/fixtures/sample.md`：导入思源的样例文档

## 准备

1. 启动思源桌面端（建议开发模式）。
2. 在思源中新建一个测试笔记本（例如：`CodeTabs-Test`）。
3. 将 `docs/testing/fixtures/sample.md` 导入到该笔记本。
4. 确保已开启「允许执行 HTML 块内脚本」。

## 回归清单（建议按顺序）

1. **新语法转换**
   - 选中“新语法示例”代码块，执行「块：代码块 -> 标签页」。
   - 确认标签标题、语言、默认激活状态正确，长标题自动处理。
   - 确认标签过多时可横向滚动，代码块样式正确（边距/背景/字体/圆角）。
2. **旧语法兼容 && 切回代码块**
   - 选中“旧语法示例”代码块转换为标签页。
   - 点击“切回代码块”，确认语法升级为新语法且内容完整。
   - 触发快捷键（代码块 -> 标签页 / 标签页 -> 代码块），确认功能正常。
3. **Markdown 渲染**
   - 转换“Markdown 渲染示例”，确认内容渲染正确。
4. **思源设置项联动**
   - 切换思源设置项：代码块自动换行 / 代码块连字符 / 代码块行号。
   - 确认标签页内容与样式同步变化。
5. **复制与行号**
   - 打开代码块行号，点击复制按钮，确认复制内容不包含行号。
   - 切换标签页后再次复制，内容随标签变化。
6. **主题与配色**
   - 切换深色/浅色主题与代码配色，确认标签页样式正确更新。
7. **批量转换/还原**
   - 执行「文档：代码块 -> 标签页」再执行「文档：标签页 -> 代码块」。
8. **全局还原**
   - 执行「设置 -> 还原」全局还原，确认所有标签页恢复为代码块。
9. **异常语法提示**
   - 转换“错误语法示例”中的各个块。
   - 确认每种错误都能给出清晰的提示。
10. **设置项**

- 打开插件设置，启用“调试日志”，确认生成 `debug.log`。

## 预期产物

- `SiYuan工作空间/data/plugins/code-tabs/debug.log`（开启调试日志后）
