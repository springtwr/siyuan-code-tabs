# 测试说明（手动回归）

本目录提供用于思源环境的手动回归清单与样例文档，适用于需要依赖思源运行时的功能测试。

## 目录结构
- `docs/testing/fixtures/sample.md`：导入思源的样例文档

## 准备
1. 启动思源桌面端（建议开发模式）。
2. 在思源中新建一个测试笔记本（例如：`CodeTabs-Test`）。
3. 将 `docs/testing/fixtures/sample.md` 导入到该笔记本。
4. 确保已开启「允许执行 HTML 块内脚本」。

## 回归清单（建议按顺序）
1. **语法转换**
   - 选中示例中的新语法代码块，执行「块：代码块 -> 标签页」。
   - 确认生成标签页、标题、语言、默认激活状态正确。
   - 确认标题中的 `|` 分隔被正确解析。
2. **旧语法兼容**
   - 对旧语法块转换为标签页，再切回代码块。
   - 确认切回后语法为新语法。
3. **批量转换（文档级）**
   - 执行「文档：代码块 -> 标签页」。
   - 确认本页所有符合语法的代码块被转换。
4. **批量还原（文档级）**
   - 执行「文档：标签页 -> 代码块」。
   - 确认已还原为代码块。
5. **复制按钮**
   - 打开含多标签页的块，点击复制按钮。
   - 确认复制内容不包含行号。
    - 切换标签页后再次复制，确认复制内容随标签变化。
6. **主题切换**
   - 切换深色/浅色主题，观察标签页样式变化是否正确。
7. **行号开关**
   - 开/关思源“代码块行号”设置，观察标签页是否同步。
8. **异常语法提示**
   - 使用示例中的“错误语法块”转换。
   - 确认提示信息包含清晰的错误原因与示例。
9. **设置项**
   - 打开插件设置，启用“调试日志”，查看是否生成 `debug.log`。
10. **大量标签与滚动**
    - 转换含大量标签的块，鼠标滚轮或触控滑动标签栏。
    - 确认横向滚动正常。
11. **切换回代码块**
    - 点击标签页右上角“切回代码块”。
    - 确认语法为新语法且代码内容完整。
12. **Markdown 渲染**
    - 对 `markdown-render` 标签页转换，确认渲染内容正确。

## 预期产物
- `SiYuan工作空间/data/plugins/code-tabs/debug.log`（开启调试日志后）
