# 测试说明（手动回归）

本目录提供用于思源环境的手动回归清单与样例文档，适用于需要依赖思源运行时的功能测试。

## 目录结构

- `docs/testing/fixtures/sample.sy.zip`：导入思源的样例文档

## 准备

1. 启动思源桌面端（建议开发模式）。
2. 在思源中新建一个测试笔记本（例如：`CodeTabs-Test`）。
3. 将 `docs/testing/fixtures/sample.sy.zip` 导入到该笔记本。
4. 确保已开启「允许执行 HTML 块内脚本」。

## 回归清单（建议按顺序）

1. **插入与编辑**
   - 通过斜杠菜单输入“标签页”插入默认标签页。
   - 打开编辑面板，修改标题/语言/代码；确认拖拽排序有效。
   - 点击“设为默认”，确认默认标签高亮并生效。
   - 注意观察当删除某个标签的 标题/语言/代码 后保存是否能弹窗提醒
   - 更改某个标签的 标题/语言/代码 后不保存直接退出是否有弹窗提醒，另观察弹窗后是否还能正常编辑
2. **合并代码块**
   - 选中多个普通代码块，执行「块：合并选中代码块」。
   - 确认标签标题、语言与内容正确。
   - 注意观察合并的代码块中有空代码块时标签页的结果
3. **拆分标签页**
   - 选中标签页块，执行「块：拆分标签页为代码块」。
   - 执行「文档：拆分标签页为代码块」。
   - 在设置面板执行「拆分所有标签页」并确认全局恢复为代码块。
4. **Markdown 渲染**
   - 在编辑面板将语言设置为 `markdown-render`，将[markdown-render.md](./fixtures/markdown-render.md)中的内容复制到代码区域，确认渲染正确。
5. **思源设置项联动**
   - 切换思源设置项：代码块自动换行 / 代码块连字 / 代码块行号。
   - 确认标签页内容与样式同步变化。
6. **复制与行号**
   - 打开代码块行号，点击复制按钮，确认复制内容不包含行号。
   - 切换标签页后再次复制，内容随标签变化。
7. **主题与配色**
   - 切换深色/浅色主题与代码配色，确认标签页样式正确更新。
8. **设置项**
   - 打开插件设置，启用“调试日志”，确认生成 `debug.log`。
   - 执行“升级旧标签页”，确认旧版标签页被转换为新版。

## 预期产物

- `SiYuan工作空间/data/plugins/code-tabs/debug.log`（开启调试日志后）
